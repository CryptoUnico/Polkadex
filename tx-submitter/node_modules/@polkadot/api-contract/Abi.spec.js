"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _ = require(".");

var _contracts = _interopRequireDefault(require("../test/contracts"));

// Copyright 2017-2020 @polkadot/api-contract authors & contributors
// SPDX-License-Identifier: Apache-2.0
describe('Abi', () => {
  Object.entries(_contracts.default).forEach(([abiName, abi]) => {
    it(`initializes from a contract ABI (${abiName})`, () => {
      try {
        const messageIds = abi.spec.messages.map(({
          name
        }) => Array.isArray(name) ? name[0] : name);
        const inkAbi = new _.Abi(_contracts.default[abiName]);
        expect(inkAbi.messages.map(({
          identifier
        }) => identifier)).toEqual(messageIds);
      } catch (error) {
        console.error(error);
        throw error;
      }
    });
  });
});